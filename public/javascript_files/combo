!function(i,n){"use strict";var t,o,r=i.YAHOO=i.YAHOO||{},e=r.SP=r.SP||{},s=[];function l(){}l.ATTRS={container:{value:null,setter:n.querySelector.bind(n)},item:{value:null},visibilityFeedbackUrl:{value:null},isScrollableModule:{value:!0}},l.prototype={initializer:function(){var e=this,t=e.getInvisibleItems();0<t.length&&(e.set("items",t),e.setEventHandler())},setEventHandler:function(){var e=this,t=e.get("container");r.Event.listen(t,"scroll",e.delayedProcess.bind(e)),r.Event.listen(i,"windowresize",e.process.bind(e)),r.Event.on("containerresize",e.delayedProcess.bind(e),t),e.isContainerHidden()&&r.Event.listen(n,"scroll",e.delayedProcess.bind(e))},getInvisibleItems:function(){var e,t=this,i=[],n=t.get("container");return n&&(e=t.get("item"),0<(n=n.querySelectorAll(e)).length&&n.forEach(function(e){t.isNodeVisible(e)||i.push(e)})),i},delayedProcess:function(){var e=this;t&&clearTimeout(t),t=setTimeout(function(){e.process()},100)},process:function(){var t,i=this;i.get("items").forEach(function(e){"true"!==e.dataset.processed&&i.isNodeVisible(e)&&(e.dataset.processed="true",(t=e.dataset.vf)&&i.addToQueue(t))})},isContainerHidden:function(){var e=this.get("container");return!r.Viewport.inViewport(e)},isNodeVisible:function(e){var t=this.get("container"),t=this.get("isScrollableModule")?r.Viewport.isLeftOfViewport(e)&&r.Viewport.isLeftOfElement(e,t):r.Viewport.elementIsContained(e,t);return t},addToQueue:function(e){var t=this,i=t.get("visibilityFeedbackUrl");-1===s.indexOf(e)&&(s.push(e),o=setTimeout(function(){var e;clearTimeout(o),0<s.length&&(e=i+"&tids="+s.join(","),t.fireBeacon(e)),s=[]},300))},fireBeacon:function(e){var t=new Image;t.onload=t.onerror=function(){t.onload=t.onerror=null,t=null},t.src=e}},e.BingVisibilityFeedback=l}(window,document);!function(e,o){"use strict";var c,l,u=e.YAHOO=e.YAHOO||{},s=u.SP=u.SP||{},d=[".ads",".pla",".mma"],a=[".res",".algo",".vres"],i=[".dd"];function f(e){var n=d.length,t=!1;if(!e)return t;for(var r=0;r<n;r++)if(u.DOM.ancestor(e,d[r])||u.DOM.hasClass(e,"ads")||1==e.children.length&&u.DOM.hasClass(e.firstChild,"ads")){t=!0;break}return t}function g(e){var n=a.length,t=!1;if(!e)return t;for(var r=0;r<n;r++)if(u.DOM.ancestor(e,a[r])){t=!0;break}return t}function v(e,n){e=e.currentTarget;l&&e.href&&(n+="&url="+encodeURIComponent(e.href)),c&&(n+="&clicktype=ads"),s.ULT.beacon_url(n)}function p(e,n,t,r){var a=e.currentTarget;"ad"===(n=n||"")&&f(a)||"ads"===n&&g(a)?v(e,r):"ads"!==n&&"ad"!==n&&(t?function(e,n,t){var r,a=e.currentTarget;if(a){for(var i in r=t,n)if(u.DOM.ancestor(a,i)){r=n[i];break}s.ULT.beacon_url(r)}}(e,t,r):f(a)?v(e,r):(g(a)||function(e){var n=i.length,t=!1;if(!e)return t;if(!f(e)&&!g(e))for(var r=0;r<n;r++)if(u.DOM.ancestor(e,i[r])){t=!0;break}return t}(a))&&(r=r,void 0!==(e=(e=e).currentTarget.href)&&(e=encodeURIComponent(e),r=r,l&&(r+="&url="+e),c&&(r+="&clicktype=algo"),s.ULT.beacon_url(r))))}function n(){}n.ATTRS={beacon_url:{value:null},click_region_map:{value:null},random_ad_class:{value:"div.ads",nonEmpty:!0},sendURLParam:{value:!1},sendClicktype:{value:!1},type:{value:"srp",nonEmpty:!0},linkTargets:{value:"#results a",nonEmpty:!0}},n.prototype={initializer:function(){var n,e=this,t=e.get("type"),r=e.get("beacon_url"),a=e.get("linkTargets"),i=e.get("random_ad_class");i&&d.push(i),l=e.get("sendURLParam"),c=e.get("sendClicktype"),n=e.get("click_region_map"),r&&(u.Event.delegate("mousedown",function(e){p(e,t,n,r)},o,a),n&&u.Event.delegate("click",function(e){p(e,t,n,r)},o,"input.sbb, button.sbb"),u.Event.on("bgClick",e.handleAdPartnerBeacon.bind(e)))},handleAdPartnerBeacon:function(e){var n=this.get("click_region_map"),t=this.get("type"),r=this.get("beacon_url");r&&p(e.detail.event,t,n,r)}},s.YHSPT=n}(window,document);